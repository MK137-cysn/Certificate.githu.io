<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxury Certificate - Side Signatures</title>
    <link href="https://fonts.googleapis.com/css2?family=Siemreap&family=Cinzel:wght@700&family=Playball&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        :root { 
            --gold: linear-gradient(135deg, #bd9354 0%, #ffde59 50%, #bd9354 100%);
            --navy: #0c1424;
        }

        body { font-family: 'Siemreap', sans-serif; margin: 0; background: #111; color: #fff; overflow-x: hidden; }

        /* Navbar áá¼á…á”áŸ†á•á»á */
        .navbar { 
            background: rgba(0,0,0,0.95); height: 38px; 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 12px; position: sticky; top: 0; z-index: 2000;
            border-bottom: 1px solid #bd9354;
        }
        .menu-btn { 
            background: var(--gold); border: none; padding: 3px 12px; 
            border-radius: 4px; cursor: pointer; color: #000; font-weight: bold; font-size: 10px;
        }

        /* Ads Telegram */
        #adsPopup {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: flex; align-items: center;
            justify-content: center; z-index: 3000; backdrop-filter: blur(5px);
        }
        .ads-content {
            background: #fff; color: #333; width: 85%; max-width: 350px;
            padding: 25px; border-radius: 15px; text-align: center;
            border: 2px solid #bd9354; box-shadow: 0 0 20px gold;
        }
        .tg-link {
            display: block; background: #0088cc; color: white; text-decoration: none;
            padding: 10px; margin: 8px 0; border-radius: 8px; font-weight: bold; font-size: 13px;
        }
        .close-ads { background: var(--gold); border: none; padding: 10px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; margin-top: 15px; }

        /* Editor Panel */
        .overlay-editor { 
            position: fixed; top: 38px; left: 0; width: 100%; height: 0; 
            background: #fff; z-index: 1500; overflow-y: auto; transition: 0.3s;
            color: #333; padding: 0 20px; box-sizing: border-box;
        }
        .overlay-editor.active { height: calc(100% - 38px); padding-top: 20px; }
        .input-box { margin-bottom: 12px; }
        .input-box label { font-size: 11px; font-weight: bold; display: block; margin-bottom: 4px; color: var(--navy); }
        .input-box input, .input-box select, .input-box textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-family: 'Siemreap'; font-size: 14px; box-sizing: border-box; }
        .btn-action { background: var(--navy); color: gold; width: 100%; padding: 14px; border: 1px solid gold; border-radius: 8px; font-weight: bold; cursor: pointer; margin-bottom: 10px; }

        /* Certificate Styling */
        .preview-area { display: flex; flex-direction: column; align-items: center; padding: 20px; gap: 40px; }
        .cert-wrapper { transform: scale(0.23); margin: -300px 0; box-shadow: 0 20px 60px rgba(0,0,0,0.7); }
        @media (min-width: 800px) { .cert-wrapper { transform: scale(0.6); margin: -150px 0; } }

        .cert-paper { width: 1123px; height: 794px; background: var(--p); padding: 30px; box-sizing: border-box; position: relative; }
        .cert-content { 
            width: 100%; height: 100%; background: var(--bg); display: flex; 
            flex-direction: column; align-items: center; justify-content: space-around; 
            padding: 40px 80px; box-sizing: border-box; position: relative;
            border: 2px solid var(--a);
        }

        .inner-border { position: absolute; top: 12px; left: 12px; right: 12px; bottom: 12px; border: 1px solid var(--a); pointer-events: none; }
        
        .theme-navy { --p: #0c1424; --a: #d4af37; --bg: #fffdf5; }
        .theme-red { --p: #5d0000; --a: #ffde59; --bg: #fffafa; }
        .f-classic { border: 10px double var(--a); }
        
        .outName { font-family: 'Playball', cursive; color: var(--p); border-bottom: 4px double var(--a); padding: 0 70px; display: inline-block; margin-top: 10px; }
        
        /* á€áŸ‚áŸá˜áŸ’ášá½á›á€á“áŸ’á›áŸ‚á„á ááŸ’áá›áŸáá¶á±áŸ’á™á‘áŸ…áŸá„áá¶á„ */
        .footer { width: 100%; display: flex; justify-content: space-between; align-items: flex-end; margin-top: 20px; }
        .sign-block { text-align: center; width: 300px; }
        .line { border-top: 2px solid var(--p); width: 100%; margin-top: 10px; }
        
        .seal { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); width: 115px; opacity: 0.9; }
        .deco-txt { color: var(--a); font-weight: bold; letter-spacing: 10px; font-size: 22px; font-family: 'Cinzel'; }
    </style>
</head>
<body class="theme-navy">

    <div id="adsPopup">
        <div class="ads-content">
            <h2 style="margin:0 0 10px 0; font-size: 18px;">áŸá¼á˜á…á¼á›ášá½á˜á‡á¶á˜á½á™á™á¾á„</h2>
            <a href="https://t.me/Lesson_questions12" class="tg-link" target="_blank">ğŸ“¢ Lesson Questions</a>
            <a href="https://t.me/CHANNEL_QUIZ11" class="tg-link" target="_blank">ğŸ§  Channel Quiz</a>
            <a href="https://t.me/I_AM_RA2" class="tg-link" target="_blank">ğŸ‘¤ I AM RA2</a>
            <button class="close-ads" onclick="closeAds()">á™á›áŸ‹á–áŸ’ášá˜ á“á·á„á…á¼á›á”áŸ’ášá¾</button>
        </div>
    </div>

    <div class="navbar">
        <button class="menu-btn" onclick="toggleMenu()">â˜° á€áŸ‚á¢ááŸ’áá”á‘</button>
        <div style="font-family: 'Cinzel'; font-size: 10px; color: gold;">SIDE SIGNATURE MODE</div>
        <div style="width: 10px;"></div>
    </div>

    <div class="overlay-editor" id="overlay">
        <div style="max-width: 450px; margin: 0 auto;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-box"><label>á–ááŸŒ</label><select id="inTheme" onchange="autoSave()"><option value="theme-navy">Navy & Gold</option><option value="theme-red">Royal Red</option></select></div>
                <div class="input-box"><label>áŸáŸŠá»á˜</label><select id="inFrame"><option value="f-classic">Classic Royal</option></select></div>
            </div>
            <div class="input-box"><label>á…áŸ†áá„á‡á¾á„á’áŸ†</label><input type="text" id="inTitle" oninput="autoSave()"></div>
            <div class="input-box"><label>áˆáŸ’á˜áŸ„áŸ‡áŸá·áŸáŸ’áŸ</label><input type="text" id="inName" placeholder="áˆáŸ’á˜áŸ„áŸ‡áŸá·áŸáŸ’áŸ..." oninput="autoSave()"></div>
            <div class="input-box"><label>ááŸ’á›á¹á˜áŸá¶áš</label><textarea id="inDesc" rows="2" oninput="autoSave()"></textarea></div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div class="input-box"><label>áˆáŸ’á˜áŸ„áŸ‡á”áŸ’ášá’á¶á“ (á†áŸ’áœáŸá„)</label><input type="text" id="inMan" oninput="autoSave()"></div>
                <div class="input-box"><label>ááŸ’á„áŸƒááŸ‚ (áŸáŸ’áá¶áŸ†)</label><input type="text" id="inDate" oninput="autoSave()"></div>
            </div>
            <button class="btn-action" onclick="addNewCert()">+ á”á„áŸ’á€á¾ááœá·á‰áŸ’á‰á¶á”á“á”áŸááŸ’ášááŸ’á˜á¸</button>
            <button class="btn-action" style="background:var(--gold); color:#000; border:none;" onclick="downloadAll()">á‘á¶á‰á™á€ (HD)</button>
            <button class="btn-action" style="background:#eee; color:#333; border:none;" onclick="toggleMenu()">á”á·á‘</button>
        </div>
    </div>

    <div class="preview-area" id="certList"></div>

    <script>
        function toggleMenu() { document.getElementById('overlay').classList.toggle('active'); }
        function closeAds() { document.getElementById('adsPopup').style.display = 'none'; }

        function autoSave() {
            const data = {
                theme: document.getElementById('inTheme').value,
                title: document.getElementById('inTitle').value,
                name: document.getElementById('inName').value,
                desc: document.getElementById('inDesc').value,
                man: document.getElementById('inMan').value,
                date: document.getElementById('inDate').value
            };
            localStorage.setItem('cert_save_side', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('cert_save_side');
            if (saved) {
                const d = JSON.parse(saved);
                document.getElementById('inTheme').value = d.theme;
                document.getElementById('inTitle').value = d.title;
                document.getElementById('inName').value = d.name;
                document.getElementById('inDesc').value = d.desc;
                document.getElementById('inMan').value = d.man;
                document.getElementById('inDate').value = d.date;
            } else {
                document.getElementById('inTitle').value = "CERTIFICATE";
                document.getElementById('inDesc').value = "áŸá˜áŸ’ášá¶á”áŸ‹á€á¶ášá”á‰áŸ’á…á”áŸ‹áœá‚áŸ’á‚áŸá·á€áŸ’áŸá¶ \"á€á¶ášášá…á“á¶á‚áŸá á‘áŸ†á–áŸáš\" áŠáŸ„á™á‡áŸ„á‚á‡áŸá™áŸ”";
                document.getElementById('inMan').value = "á›áŸ„á€ á áŸŠá¶á„ áŸá»á—áŸá€áŸ’ááŸ’áš";
                document.getElementById('inDate').value = "ááŸ’á„áŸƒá‘á¸ áŸ áŸ¦ ááŸ‚á€á»á˜áŸ’á—áŸˆ á†áŸ’á“á¶áŸ†áŸ¢áŸ áŸ¢áŸ¦";
            }
        }

        function addNewCert() {
            const theme = document.getElementById('inTheme').value;
            const title = document.getElementById('inTitle').value;
            const name = document.getElementById('inName').value || "áˆáŸ’á˜áŸ„áŸ‡áŸá·áŸáŸ’áŸ";
            const desc = document.getElementById('inDesc').value;
            const man = document.getElementById('inMan').value;
            const date = document.getElementById('inDate').value;

            const html = `
                <div class="cert-wrapper ${theme} f-classic">
                    <div class="cert-paper" data-name="${name}">
                        <div class="cert-content">
                            <div class="inner-border"></div>
                            <img src="https://cdn-icons-png.flaticon.com/512/610/610333.png" class="seal">
                            
                            <div style="text-align:center;">
                                <h1 style="font-family:'Cinzel'; font-size:85px; color:var(--p); margin:0;">${title}</h1>
                                <div class="deco-txt">OF EXCELLENCE</div>
                            </div>

                            <div style="text-align:center;">
                                <p style="font-size:24px; color:#555; margin:0; font-style: italic;">áœá·á‰áŸ’á‰á¶á”á“á”áŸááŸ’ášá“áŸáŸ‡á•áŸ’áŠá›áŸ‹á‡á¼á“á…áŸ†á–áŸ„áŸ‡</p>
                                <div class="outName" style="font-size:${name.length > 20 ? '55px' : '90px'};">${name}</div>
                            </div>

                            <div style="font-size:22px; color:#333; max-width:850px; text-align:center; line-height:1.7;">${desc}</div>

                            <div class="footer">
                                <div class="sign-block">
                                    <div style="font-weight:bold; font-size:26px; color:var(--p);">${man}</div>
                                    <div class="line"></div>
                                    <div style="font-size:14px; color:#888; margin-top:5px; letter-spacing:1px;">SIGNATURE</div>
                                </div>
                                <div class="sign-block">
                                    <div style="font-weight:bold; font-size:24px; color:var(--p);">${date}</div>
                                    <div class="line"></div>
                                    <div style="font-size:14px; color:#888; margin-top:5px; letter-spacing:1px;">DATE</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            document.getElementById('certList').insertAdjacentHTML('beforeend', html);
            if(document.getElementById('overlay').classList.contains('active')) toggleMenu();
        }

        window.onload = () => { loadData(); addNewCert(); };

        async function downloadAll() {
            const certs = document.querySelectorAll('.cert-paper');
            if (certs.length === 0) return;
            alert("á€áŸ†á–á»á„á”á„áŸ’á€á¾áášá¼á”á—á¶á– HD...");
            for (let c of certs) {
                const canvas = await html2canvas(c, { scale: 3, useCORS: true });
                const link = document.createElement('a');
                link.download = `${c.getAttribute('data-name')}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
            }
        }
    </script>
</body>
</html>
